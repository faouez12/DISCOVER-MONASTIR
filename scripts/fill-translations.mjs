import { readFileSync, writeFileSync } from 'fs';
import { join, dirname } from 'path';
import { fileURLToPath } from 'url';

const dir = join(dirname(fileURLToPath(import.meta.url)), '../messages');

// Translations for each item's key fields per language
const translations = {
    fr: {
        "marina-twilight-escape": { title: "Évasion Crépusculaire à la Marina", subtitle: "Sérénité au bord des yachts", description: "Une promenade tranquille à travers les docks sophistiqués au coucher du soleil.", story: "La Marina de Monastir est l'endroit où la ville rencontre le monde. C'est un espace de yachts élégants, de drapeaux internationaux, et des meilleurs fruits de mer de la Méditerranée.\n\nAu coucher du soleil, les lumières des restaurants commencent à scintiller sur l'eau. C'est l'endroit idéal pour une 'passeggiata'—la promenade lente traditionnelle.\n\nElle représente le visage moderne et tourné vers l'extérieur de Monastir, tout en conservant cette hospitalité sahélienne essentielle.", pledge: "J'ai marché les docks argentés, j'ai partagé un sourire avec la mer, je suis chez moi à la Marina." },
        "medina-treasure-hunt": { title: "Chasse au Trésor dans la Médina", subtitle: "Labyrinthes du Sahel", description: "Se perdre dans les ruelles blanchies pour trouver le cœur artisanal de la ville.", story: "La Médina de Monastir est un organisme vivant. Derrière chaque porte bleue se cache une histoire potentielle. Vous pourriez trouver un artisan du cuir de troisième génération, une épicerie cachée, ou une cour tranquille remplie d'orangers.\n\nVous finirez par trouver le marché central, où les couleurs des olives fraîches et le parfum du jasmin convergent en une surcharge sensorielle.", pledge: "J'ai parcouru les ruelles, j'ai trouvé le cœur caché, je suis gardien des souks secrets." },
        "hammam-said-swim": { title: "Baignade Secrète de Hammam Said", subtitle: "Le Lagon de Cristal", description: "Un paradis liquide où l'eau est si claire qu'il semble nager dans la lumière.", story: "Il existe un coin tranquille de la côte où la Méditerranée montre ses véritables couleurs de diamant. L'eau ici est légendaire. Filtrée par les rochers de calcaire blanc, elle atteint une clarté qui fait paraître les bateaux comme s'ils flottaient dans l'air.\n\nLes légendes anciennes disent que ces eaux ont des propriétés curatives.", pledge: "Je me suis abandonné aux profondeurs turquoise, j'ai été purifié par la mer de diamants, je suis un enfant de Hammam Said." },
        "beach-solitude": { title: "Solitude de Plage", subtitle: "L'Horizon Sans Fin", description: "Des kilomètres de sable doré où seules vos empreintes existent, et la seule musique est la marée.", story: "Les plages sauvages de Monastir sont ses meilleurs secrets gardés. Loin des zones de villégiature, ces étendues de sable offrent un silence méditatif.\n\nC'est là où les dunes dorées rencontrent le plateau turquoise. Il n'y a pas de parasols ici, seulement le bois flotté occasionnel.", pledge: "J'ai laissé mes marques sur le sable doré, j'ai fixé le bleu infini, je suis une âme du rivage." },
        "ghdamsi-cave": { title: "Quête de la Grotte Ghdamsi", subtitle: "La Grotte Côtière Phénicienne", description: "Une ancienne grotte marine sculptée par le temps et la marée.", story: "La Grotte Ghdamsi est une cathédrale de pierre. Pour des siècles, elle a servi de repère pour les marins. La lumière se réfléchissant sur les parois intérieures crée une lueur bleue éthérée.\n\nTaillée dans les falaises calcaires de la péninsule de Monastir, cette grotte marine témoigne de la puissance des marées.", pledge: "J'ai marché la salle des géants de pierre, j'ai entendu le battement de cœur de la terre, je suis gardien de la grotte." },
        "cemetery-whispers": { title: "Murmures du Cimetière Marin", subtitle: "L'Étrangement Beau", description: "Un cimetière en colline surplombant la mer, où le silence et la beauté conspirent.", story: "Le cimetière marin de Monastir est unique au monde. Perché sur une hauteur surplombant la baie, ses tombes blanchies à la chaux scintillent au soleil. Les locaux appellent le vent marin qui traverse les cyprès 'les murmures des disparus'.", pledge: "J'ai contemplé le bord de la mémoire et de la mer, j'ai entendu les murmures, je porte la paix du cimetière dans mon cœur." },
        "museum-museum": { title: "Chroniques du Musée", subtitle: "Tracer les Racines du Pouvoir", description: "Une plongée dans les artefacts et l'histoire personnelle qui ont façonné la destinée d'une nation.", story: "Logé dans l'ancien Palais d'Été, ce musée offre un regard intime sur l'homme qui a mené la Tunisie à l'indépendance. De lettres personnelles aux cadeaux du monde entier, chaque pièce raconte une histoire de diplomatie.", pledge: "J'ai parcouru les couloirs du Palais d'Été, j'ai touché l'esprit de l'indépendance, je fais partie de l'histoire continue." },
        "olive-wood": { title: "Bois d'Olivier", subtitle: "Sculpté dans les Antiques Vergers", description: "L'âme des terres tunisiennes, magistralement sculptée en pièces d'art intemporel.", story: "Chaque pièce de bois d'olivier est unique, façonnée par le soleil et le sol du Sahel. Nos artisans lisent le grain d'arbres centenaires, créant de l'art fonctionnel qui apporte la chaleur du paysage tunisien.\n\nL'olivier est l'Arbre d'Or de la Tunisie.", pledge: "J'ai touché le grain des antiques vergers, j'ai ramené l'arbre d'or chez moi, je suis un protecteur de l'âme du Sahel." },
        "pottery-mastery": { title: "Poterie de Moknine", subtitle: "De la Terre et du Feu", description: "L'argile ancienne de Moknine, transformée en céramiques vibrantes.", story: "La poterie est le souffle de la terre. Dans le village de Moknine, le mouvement rythmique de la roue du potier est resté inchangé depuis des siècles. L'argile de Moknine est unique, récoltée dans les profondeurs de la terre du Sahel.", pledge: "J'ai touché l'argile crue du Sahel, j'ai assisté au feu transformant la terre en art, je suis gardien des antiques fours." },
        "chechia-heritage": { title: "Chéchias", subtitle: "La Couronne du Sahel", description: "L'iconique bonnet de feutre rouge, artisanal dans une tradition vieille de 600 ans.", story: "La Chéchia est plus qu'un chapeau; c'est une déclaration d'identité. Ce bonnet de feutre rouge iconique est le symbole de la culture tunisienne depuis plus de 600 ans.\n\nLe processus de feutrage est un art complexe, transmis de maître en maître.", pledge: "J'ai porté la couronne du Sahel, j'ai touché 600 ans de tradition, je fais partie de l'héritage Chéchia." },
        "fouta-heritage": { title: "Foutas", subtitle: "L'Essentiel du Hammam", description: "Coton léger et luxueux tisssé — le textile tunisien ultime.", story: "La Fouta est le textile le plus démocratique de Tunisie. Présente dans chaque hammam, sur chaque plage, c'est le grand égalisateur du Sahel. Sa légèreté et son absorbance sont inégalées.", pledge: "J'ai été enveloppé dans la chaleur du fil du Sahel, j'ai ramené la sagesse du hammam chez moi, je fais partie de l'histoire de la Fouta." },
        "copper-lamps": { title: "Lampes en Cuivre", subtitle: "Brillance Gravée à la Main", description: "Des lanternes en cuivre complexes qui transforment n'importe quelle pièce en ciel nord-africain.", story: "La lampe en cuivre est l'endroit où les mathématiques rencontrent la poésie. Chaque motif géométrique est un calcul précis de la façon dont la lumière voyagera.\n\nLe martelage et la gravure des feuilles de cuivre sont entièrement réalisés à la main.", pledge: "J'ai allumé l'étoile de cuivre, j'ai regardé les murs devenir un ciel, je porte la lumière du Sahel dans mon espace." },
        "sahel-embroidery": { title: "Broderie du Sahel", subtitle: "Travail d'Aiguille Délicat", description: "Chaque point est une phrase dans un langage visuel centenaire de couleur et de foi.", story: "La broderie du Sahel est un langage secret. Chaque motif—la grenade, la main, le poisson—porte une signification spécifique tissée dans la culture tunisienne depuis des siècles.", pledge: "J'ai suivi le fil de l'histoire du Sahel, j'ai honoré les mains qui l'ont créé, je suis gardien de l'art de l'aiguille." },
        "hammam-said-cove": { title: "Crique de Hammam Said", subtitle: "La Baie de Cristal Secrète", description: "Une baie cachée où l'eau turquoise rencontre le calcaire blanc.", story: "L'accès à la Crique de Hammam Said nécessite une courte randonnée. L'eau dans la crique est d'un bleu qui semble artificiellement amélioré. Les falaises de calcaire blanc reflètent le soleil.", pledge: "J'ai trouvé la baie secrète, j'ai nagé dans les eaux cristallines, je suis gardien du secret le plus précieux de Hammam Said." },
        "swani-beach": { title: "Plage Skanes", subtitle: "Le Tronçon Sauvage", description: "Un ruban de côte moins fréquenté où les dunes commencent et les sentiers touristiques se terminent.", story: "La Plage Skanes est l'anti-resort. Son état naturel de dunes et de rivages balayés par le vent est délibérément préservé, attirant ceux qui recherchent l'authenticité de la côte tunisienne.", pledge: "J'ai marché le tronçon sauvage, j'ai ressenti le vent immédiat, je suis ami du rivage indomptable." },
        "ghdamsi-coast": { title: "Côte de Ghdamsi", subtitle: "Rochers et Échos de Pêche", description: "Un promontoire rugueux de pierre du Sahel où les bateaux de pêche ont ancré depuis les Phéniciens.", story: "La Côte Ghdamsi est le visage de Monastir au travail. Ici, l'ancienne relation de la ville avec la mer est une réalité quotidienne. Le matin, l'air sent le diesel, le sel et la prise fraîche.", pledge: "Je me suis tenu sur l'antique promontoire, j'ai regardé la flotte revenir, je suis témoin du rythme éternel de la mer." },
        "old-port": { title: "Vieux Port", subtitle: "Le Quai Authentique des Pêcheurs", description: "L'âme ouvrière du front de mer de Monastir, où la prise est fraîche et les histoires sont vieilles.", story: "Pendant que la Marina éblouit avec ses yachts, le Vieux Port de Monastir est là où réside la véritable âme maritime de la ville. Le quai est le plus animé à l'aube, quand la flotte de nuit revient avec sa prise.", pledge: "Je me suis tenu parmi les pêcheurs à l'aube, j'ai mangé la prise du jour, je fais partie de l'histoire éternelle du Vieux Port." },
        "viewpoint-dune": { title: "Dune de Vue", subtitle: "Panoramas sur la Baie", description: "Une élévation naturelle qui offre une vue cinématique à 180° sur toute la baie de Monastir.", story: "C'est l'un des grands points de vue méconnus de la côte tunisienne. Du sommet de cette dune naturelle, tout l'arc de la baie de Monastir se déploie devant vous.", pledge: "J'ai grimpé au sommet de la baie, j'ai vu la ville entière étalée en bas, j'ai compris ce que signifie vivre ici." },
        "medina-alleys": { title: "Ruelles de la Médina", subtitle: "Rues Calmes et Portes Bleues", description: "Le labyrinthe blanchi à la chaux derrière le souk principal, où le vrai Monastir respire encore.", story: "La plupart des visiteurs de la Médina trouvent le marché central et repartent. Le vrai trésor est dans les ruelles plus calmes qui rayonnent vers l'extérieur. Ces ruelles sont une leçon de maître en architecture sahélienne.", pledge: "J'ai marché les rues calmes, j'ai admiré les portes bleues, j'ai entrevu l'âme privée de la ville." },
        "ribat-destination": { title: "Ribat de Monastir", subtitle: "Gardien de la Côte", description: "L'emblématique forteresse du VIIIe siècle qui veille sur Monastir depuis plus de 12 siècles.", story: "Le Ribat de Monastir est le symbole le plus iconique de la ville. Ses murs de grès doré témoignent de la montée et de la chute d'empires.", pledge: "Je me suis tenu devant les murs du Ribat, j'ai ressenti ses 1200 ans, je suis à jamais lié à cette sentinelle de pierre." },
        "mausoleum-destination": { title: "Mausolée Bourguiba", subtitle: "Monument au Père de la Nation", description: "Le lieu de repos final du fondateur de la Tunisie, un monument d'une beauté architecturale époustouflante.", story: "Le Mausolée Bourguiba est le joyau doré de la silhouette de Monastir. L'espace intérieur est un sanctuaire silencieux dédié à l'homme qui a aboli la monarchie.", pledge: "J'ai payé mes respects sous le dôme doré, je comprends l'histoire de cette nation, je porte son héritage en avant." },
        "beaches-destination": { title: "Plages de Monastir", subtitle: "Le Rivage Doré du Sahel", description: "Des kilomètres de plages propres et dorées le long de la péninsule de Monastir.", story: "Les plages de Monastir font partie des plus belles de la Méditerranée. La péninsule crée un abri naturel qui maintient les eaux calmes et les sables immaculés.", pledge: "J'ai marché les rivages dorés, j'ai nagé en Méditerranée, je suis un enfant de la côte de Monastir." },
        "marina-destination": { title: "Marina de Monastir", subtitle: "Le Phare du Sahel", description: "Une marina de yachting de classe mondiale qui sert de visage moderne de Monastir.", story: "La Marina de Monastir est l'endroit où l'héritage méditerranéen de la ville rencontre son présent cosmopolite.", pledge: "J'ai marché les docks argentés, j'ai regardé le phare guider la flotte, je suis chez moi à la Marina de Monastir." },
        "medina-destination": { title: "Vieille Médina", subtitle: "Le Quartier Historique Vivant", description: "Un centre-ville historique significatif, où passé et présent coexistent.", story: "La Médina de Monastir est l'un des quartiers historiques les mieux préservés de la côte nord-africaine. Protégée par des sections de ses murs du IXe siècle, c'est un labyrinthe compact.", pledge: "J'ai marché les rues anciennes, j'ai respiré l'air de mille ans, je fais partie de l'histoire vivante de la Médina." },
        "mosque-destination": { title: "Grande Mosquée de Monastir", subtitle: "Un Fondement de Foi", description: "L'ancienne mosquée de congrégation, l'une des plus anciennes d'Afrique du Nord.", story: "La Grande Mosquée de Monastir se dresse au cœur géographique et spirituel de la vieille ville. Sa fondation date du règne de la dynastie Aghlabide.", pledge: "Je me suis assis à l'ombre de l'antique cour, j'ai entendu l'appel du minaret, je respecte le fondement de la foi." },
        "museum-destination": { title: "Musée Bourguiba", subtitle: "Le Palais de l'Indépendance", description: "L'ancien Palais d'Été de Bourguiba, maintenant un musée dédié à la vie du président fondateur.", story: "Situé dans les jardins de l'ancien palais d'État à Skanes, le Musée Bourguiba offre un regard intime sur l'homme derrière la nation.", pledge: "J'ai parcouru les pièces du Palais d'Été, j'ai compris l'homme et le mythe, j'honore l'héritage de l'indépendance." }
    }
};

const en = JSON.parse(readFileSync(join(dir, 'en.json'), 'utf8'));
const enItems = en.DiscoverData;

for (const lang of ['fr', 'ar', 'de', 'ru']) {
    const file = join(dir, `${lang}.json`);
    const data = JSON.parse(readFileSync(file, 'utf8'));

    for (const [key, enVal] of Object.entries(enItems)) {
        if (data.DiscoverData[key]) continue; // already exists

        const override = translations[lang]?.[key];
        if (override) {
            data.DiscoverData[key] = { ...enVal, ...override };
        } else {
            // Use English as fallback for languages without specific translations
            data.DiscoverData[key] = enVal;
        }
    }

    writeFileSync(file, JSON.stringify(data, null, 4), 'utf8');
    console.log(`✓ Updated ${lang}.json with ${Object.keys(data.DiscoverData).length} items`);
}

console.log('Done!');
